#:import Timer uix.components.timer
#:import GameCardContainer uix.components.game_card_container
#:import KMDIconSquaredButton uix.base_components.kmd_icon_squared_button


<GameScreen>

    MDBoxLayout:
        orientation: "vertical"
        id: container

        MDBoxLayout:
            size_hint_y: .20
            orientation: "vertical"

            MDBoxLayout:
                md_bg_color: 1,1,1,1
                padding: dp(10)
                MDLabel:
                    id: remaining_jumps
                    text: "0"
                    adaptive_size: True
                    font_style: "H4"
                    width: 40
                    halign: "left"
                MDIconButton:
                    icon: "redo"
                    padding: 5

                Timer:
                    id: timer
                    format: "%M:%S"
                    font_style: "H4"
                    halign: "center"
                    last_seconds: 10
                    on_finish: root.finish_round()
                    on_last_seconds: root.clock_sound.play()

                MDIconButton:
                    icon: "checkbox-marked-circle-outline"
                    padding: 5
                MDLabel:
                    id: player_points
                    adaptive_size: True
                    text: "0"
                    width: 40
                    font_style: "H4"
                    halign: "right"

            MDRelativeLayout:
                id: controls_buttons
                MDCard:
                    radius: [0, 0, 20, 20]
                    size_hint_x: 0.3
                    pos_hint: {"center_x": .5, "center_y": .5}
                    MDBoxLayout:
                        spacing: dp(20)
                        padding: dp(20)
                    MDIconButton:
                        #pos_hint: {"x": .375, "center_y": .5}
                        icon: "home"
                        padding: 0
                        #md_bg_color: 0.9, 0.9, 0.9, 1
                        on_release: root.confirm_exit()

                    MDIconButton:
                        id: sound_button
                        #pos_hint: {"x": .525, "center_y": .5}
                        icon: "volume-off"
                        padding: 0
                        #md_bg_color: 0.9, 0.9, 0.9, 1
                        on_release: root.toggle_sounds()

        MDBoxLayout:
            orientation: "vertical"
            md_bg_color: 0,0,0,0
            MDBoxLayout:
                GameCardContainer:
                    id: card_container

            MDBoxLayout:
                id: game_buttons
                padding: [dp(10), dp(10), dp(10), dp(10)]
                spacing: dp(20)
                adaptive_size: True
                pos_hint: {"center_x": .5, "center_y": .5}
                KMDIconSquaredButton:
                    id: wrong_button
                    icon: "close-thick"
                    md_bg_color: app.theme_cls.error_color
                    on_release: root.wrong_answer()

                KMDIconSquaredButton:
                    id: jump_button
                    icon: "redo"
                    md_bg_color: 0.9, 0.9, 0.9, 1
                    on_release: root.jump_request()

                KMDIconSquaredButton:
                    id: right_button
                    icon: "check-bold"
                    md_bg_color: app.theme_cls.success_color
                    on_release: root.right_answer()

