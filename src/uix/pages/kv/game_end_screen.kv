#:import ConfettiRain uix.components.confetti_rain
#:import KMDFillRoundFlatButton uix.base_components.kmd_fill_round_flat_button


<GameEndScreen>:
    title: root.winner
    image: 'assets/images/endgame/winner.png'

    MDBoxLayout:
        orientation: "vertical"
        MDCard:
            id: winner_card
            md_bg_color: 1,0,0,1
            radius: [0, 0, 30, 30]
            padding: dp(25)
            MDBoxLayout:
                orientation: "vertical"
                Image:
                    source: root.image
                    pos_hint: {"center_x": .5, "center_y": 0.8}
                    size_hint: .6, .6
                    keep_ratio: True
                    opacity: 1
                    #size_hint_y: None
                    #height: logo_container.height - dp(20)

                MDBoxLayout:
                    pos_hint: {"center_x": .5, "y": .6}
                    orientation: "vertical"
                    padding: dp(10)
                    adaptive_height: True
                    spacing: dp(20)
                    size_hint_x: .7
                    canvas.before:
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size

                    MDLabel:
                        text: root.title
                        bold: True
                        size_hint_y: None
                        height: self.texture_size[1]
                        font_style: "H6"
                        halign: "center"
                        valign: "center"

        MDGridLayout:
            pos_hint: {"center_x": .5, "center_y": .08}
            cols:2
            padding:[dp(15),dp(30),dp(15),dp(35)]
            row_default_height: 50
            row_force_default: True
            MDLabel:
                pos_hint: {"center_x": .6, "center_y": .8}
                text: "Game Level:"
                halign:"center"
            MDLabel:
                pos_hint: {"center_x": .4, "center_y": .8}
                text: root.game_level
                halign:"center"
            MDLabel:
                pos_hint: {"center_x": .6, "center_y": .8}
                text: "Num Players:"
                halign:"center"
            MDLabel:
                pos_hint: {"center_x": .4, "center_y": .8}
                text: root.num_players
                halign:"center"
            MDLabel:
                pos_hint: {"center_x": .6, "center_y": .7}
                text: "Num Jumps:"
                halign:"center"
            MDLabel:
                pos_hint: {"center_x": .4, "center_y": .7}
                text: root.num_jumps
                halign:"center"
            MDLabel:
                pos_hint: {"center_x": .6, "center_y": .6}
                text: "Round Time:"
                halign:"center"
            MDLabel:
                pos_hint: {"center_x": .4, "center_y": .6}
                text: root.round_time
                halign:"center"
            MDLabel:
                pos_hint: {"center_x": .4, "center_y": .6}
                text: "Points: "
                halign:"center"
            MDLabel:
                pos_hint: {"center_x": .4, "center_y": .6}
                text: root.points
                halign:"center"

        MDBoxLayout:
            orientation: "vertical"
            spacing: "10dp"
            padding: [dp(10), dp(10), dp(10), dp(10)]
            adaptive_size: True
            pos_hint: {"center_x": 0.5, "y": 0.1}
            KMDFillRoundFlatButton:
                text: "Back Home"
                md_bg_color: 0.3, 0.3, 0.3, 1
                radius: [10, 10, 10, 10]
                on_release: root.to_home()

    FloatLayout:
        canvas.before:
            Color:
                rgba: 0, 0, 0, 0
            Rectangle:
                pos: self.pos
                size: self.size

        ConfettiRain:
            size_hint: None, None
            size: root.size